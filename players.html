<!DOCTYPE html>

<html>
  <head>
    <title>Player Stats</title>
    <script src="players.js"></script>
    <script src="inputReciever.js"></script>
    <script src="search.js"></script>
    <script src="navigator.js"></script>
    <link rel="stylesheet" href="styles/players.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">  
    <link rel="icon" type="image/x-icon" href="/images/islandstats-icon-trans-scaled.png">
  </head>

  <body onload="setPlayerName(); getDataList();" style="background-color: rgb(218, 221, 253);">
    <div class="header-bar">
        <a title="Home page" class="shortcutHome" href="index.html" ><img src="images/islandstats-icon-trans-scaled.png" style="position: absolute; width: 60px; top: 4px;"></a>
      <div class="search-row">
        <form  id="thePlayer" onsubmit="return false">
          <input class="search-bar-2" id="myPlayer" type="text" placeholder="Find Players" list="datalistPlayers" oninput="storeSearchValue()" autocomplete="off">
          <datalist class="playerlister" id="datalistPlayers">
            <option>Your Mom</option>
          </datalist>
          <button class="search-button-2" onclick="playerWindow()">Search</button>
        </form>
      </div>
    </div>
    <div class="playerProfile">
      <p class="playerName" id="playerName">Unknown Player</p>
      <p class="coinAveragePrescript">Average for a 1 round per game tournament</p>
      <p id="coinCount" class="coinCount">0<img class="coinImageBig" src="images/coin.webp"></p>
      <img src="" id="playerSkin" class="playerSkin">
      <div class="checkboxes">
        <div id="checkboxDiv">
          <label for="subCheck">Sub</label>
          <input type="checkbox" id="subCheck" class="checkbox" onchange="getTotals(); setChecks();"><br>
         <!-- <input type="checkbox" id="iwtoggle" class="checkbox" onchange="getTotals(); setChecks();">
          <label class="checkLabel" for="iwtoggle">IW</label>
        </div>
        <div>
          <input type="checkbox" id="ittoggle" class="checkbox" onchange="getTotals(); setChecks();">
          <label class="checkLabel" for="ittoggle">IT</label>
        </div>-->
        <!--<div>
          <input type="checkbox" id="ibtoggle" class="checkbox" onchange="getTotals(); getChart();">
          <label class="checkLabel" for="ibtoggle">IB</label>
        </div>-->
        <!--<div class="subCheckDiv" id="subCheckDiv">
          <label class="checkLabel" for="subCheck">Sub</label>
          <input type="checkbox" id="subCheck" class="checkbox" onchange="getTotals(); setChecks();">
        </div>-->
      </div>
    </div>
    <script>
      let playerSkinReq = sessionStorage.getItem('playerQuery');
      let skinURL = `https://mc-heads.net/body/${playerSkinReq}/.png`
      document.getElementById('playerSkin').src = skinURL;
    </script>
    <div class="displayDiv">
      <span class="displayBox" id="showStats">Event Checkboxes are empty.<br><br>Select some checkboxes to include this players events.<br><br>IW = Island Warriors<br>IT = Island Tournaments<br>IB = Island Battles</span>
    </div>
    <div class="chartMenu">
    </div>
    <canvas class="pieChart" id="pie" width="360" style="display: inline-block;"></canvas>
      <div class="chartBox">
        <canvas id="sbBar" width="80" height="260"; style="display: inline-block;"></canvas>
        <canvas id="tgttosBar" width="80" height="260"; style="display: inline-block;"></canvas>
        <canvas id="hitwBar" width="80" height="260"; style="display: inline-block;"></canvas>
        <canvas id="bbBar" width="80" height="260"; style="display: inline-block;"></canvas>
        <canvas id="pkwBar" width="80" height="260"; style="display: inline-block;"></canvas>
    </div>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/chart.js/dist/chart.umd.min.js"></script>
    <script> //game Chart <------
     const dataPie = {
      labels: ['SB(x1.5)', 'TGTTOS', 'HITW', 'BB', 'PKW(x1.5)'], //SKY BATTLE
      datasets: [{
        label: 'Coins',
        data: ['0', '0', '0', '0', '0'],
      },
    ],
    };
    const configPie = {
      type: 'pie',
      data: dataPie,
      options: {
        plugins: {
        },
        responsive: false,
        scales: {
        }
      }
    };
    const pie = new Chart(
      document.getElementById('pie'), 
       configPie,
    );

    const dataSB = {
      labels: ['SB(x1.5)'], //SKY BATTLE
      datasets: [{
        label: 'Coins',
        data: [''],
        borderWidth: 2
      },
    ],
    };
    const configSB = {
      type: 'bar',
      data: dataSB,
      options: {
        plugins: {
          legend: {
            display: false
          }
        },
        responsive: false,
        scales: {
          y: {
            max: 520, //the cap
          }
        }
      }
    };
    const sbBar = new Chart(
      document.getElementById('sbBar'), 
       configSB,
    );

    const dataTGTTOS = {
      labels: ['TGTTOS'], //TGTTOS
      datasets: [{
        label: 'Coins',
        data: [''],
        borderWidth: 2
      },
    ],
    };
    const configTGTTOS = {
      type: 'bar',
      data: dataTGTTOS,
      options: {
        plugins: {
          legend: {
            display: false
          }
        },
        responsive: false,
        scales: {
          y: {
            max: 600, //the cap
          }
        }
      }
    };
    const tgttosBar = new Chart(
      document.getElementById('tgttosBar'), 
       configTGTTOS,
    );

    const dataHITW = {
      labels: ['HITW'], //HITW
      datasets: [{
        label: 'Coins',
        data: [''],
        borderWidth: 2
      },
    ],
    };
    const configHITW = {
      type: 'bar',
      data: dataHITW,
      options: {
        plugins: {
          legend: {
            display: false
          }
        },
        responsive: false,
        scales: {
          y: {
            max: 600, //the cap
          }
        }
      }
    };
    const hitwBar = new Chart(
      document.getElementById('hitwBar'), 
       configHITW,
    );

    const dataBB = {
      labels: ['BB'], //SKY BATTLE
      datasets: [{
        label: 'Coins',
        data: [''],
        borderWidth: 2
      },
    ],
    };
    const configBB = {
      type: 'bar',
      data: dataBB,
      options: {
        plugins: {
          legend: {
            display: false
          }
        },
        responsive: false,
        scales: {
          y: {
            max: 580, //the cap
          }
        }
      }
    };
    const bbBar = new Chart(
      document.getElementById('bbBar'), 
       configBB,
    );

    const dataPKW = {
      labels: ['PKW(x1.5)'], //SKY BATTLE
      datasets: [{
        label: 'Coins',
        data: [''],
        borderWidth: 2
      },
    ],
    };
    const configPKW = {
      type: 'bar',
      data: dataPKW,
      options: {
        plugins: {
          legend: {
            display: false
          }
        },
        responsive: false,
        scales: {
          y: {
            max: 560, //the cap
          }
        }
      }
    };
    const pkwBar = new Chart(
      document.getElementById('pkwBar'), 
       configPKW,
    );
      </script>
      <script>makeChecks();</script>
    <script>
      updateChecks();
    </script>
    <script>
      getTotals();
      setChartColors();
    </script>
  </body>
</html>
